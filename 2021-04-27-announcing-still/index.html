<html class="min-h-full h-full w-full" lang="en"><head><title>Gabriel Poça | Still building static websites in Elixir</title><meta content="Gabriel Poça | Still building static websites in Elixir" name="title"><meta content="Still building static websites in Elixir" name="description"><meta content="website" property="og:type"><meta content="https://gabrielpoca.com/2021-04-27-announcing-still/index.html" property="og:url"><meta content="Gabriel Poça | Still building static websites in Elixir" property="og:title"><meta content="Still building static websites in Elixir" property="og:description"><meta content="https://gabrielpoca.com/https://gabrielpoca.com/2021-04-27-announcing-still/seo.png" property="og:image"><meta content="summary_large_image" property="twitter:card"><meta content="https://gabrielpoca.com/2021-04-27-announcing-still/index.html" property="twitter:url"><meta content="Gabriel Poça | Still building static websites in Elixir" property="twitter:title"><meta content="Still building static websites in Elixir" property="twitter:description"><meta content="https://gabrielpoca.com/https://gabrielpoca.com/2021-04-27-announcing-still/seo.png" property="twitter:image"><link href="/icon.png" rel="icon" type="image/png"><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1.0" name="viewport"><link rel="stylesheet"  href="/global-6gZG2tczcT3JAwqDe3EZkA==.css" />
<link rel="stylesheet"  href="/site--Z1K36JV3z4XqzIgy-g8zw==.css" />
</head><body class="overscroll-none antialiased font-sans min-h-full h-full overflow-x-hidden w-full"><nav class="flex justify-end space-x-3 px-4 uppercase tracking-wide h-16 items-center z-40 relative text-xs font-bold md:px-8 md:space-x-4 md:text-sm text-my-purple"><a href="/" class="opacity-60">Home</a><a href="/books" class="opacity-60">Reading</a><a href="/music" class="opacity-60">Music</a><a href="/now" class="opacity-60">Now</a><a href="/about" class="opacity-60">About</a></nav><article class="bg-black text-my-white h-entry"><div class="text-center relative flex items-center justify-center -mt-16" style="height:80vh"><h1 class="p-name mb-8 text-4xl z-20 relative mx-auto px-8 sm:text-5xl sm:px-16">Still building static websites in Elixir</h1></div><div class="mx-auto py-8 px-6 sm:max-w-screen-sm"><div class="prose max-w-none prose-lg e-content"><p>You know the saying: <em>You don’t get to 500 million users without making a few static sites</em>.</p><p><img alt="You don&#39;t get to 500 million users without making a few static sites" src="/2021-04-27-announcing-still/millions-21440013-1160w.jpeg" srcset="/2021-04-27-announcing-still/millions-21440013-290w.jpeg 290w, /2021-04-27-announcing-still/millions-21440013-580w.jpeg 580w, /2021-04-27-announcing-still/millions-21440013-870w.jpeg 870w, /2021-04-27-announcing-still/millions-21440013-1160w.jpeg 1160w" /></p><p>I enjoy building a website every once in a while, and I’ve been doing it since we designed websites in Photoshop, sliced them, and imported the slices to Dreamweaver. Things have come a long way, and now it’s easier than ever to make websites with drag-and-drop tools, a simple editor, or custom-made scripts.</p><p>There are many “modern” and “professional” tools to get you up to speed in no time. I think that it’s awesome that we can scaffold a project in a couple of seconds, write a React component, and there we have it, a static website super optimized for the modern “professional” world. But do we need all of that? Would it be possible to achieve the same thing without having to buy into a massive ecosystem of packages that keep breaking and making upgrades almost impossible? Should we be buying into those technologies just because that’s what everyone does?</p><p>Websites don’t have to be this complicated, and the browser already does a lot. We need simpler tools that don’t compromise on the developer experience and pack enough features to build a “modern” website. Other tools fit the description, but Elixir would do a much better job than everything else, as you’ll see in a bit.</p><h2>Modern development environment</h2><p>Tools like <a href="https://www.gatsbyjs.com/" title="">Gatsby</a> and <a href="https://nextjs.org/" title="">Next.js</a> changed the game for static websites. I remember going from Jekyll to Middleman and from the latter to Gatsby. Damn, Gatsby was fast at the time. The <a href="https://github.com/rails/sprockets" title="">asset pipeline</a> served us well, but it was time to say goodbye. It suddenly became easy to handle images, and extracting and inlining the above-the-fold CSS came by default.</p><p>Gatsby was great, but it soon became clear that our goals were not aligned. They still aren’t. Gatsby is huge. Upgrades were hard; documentation was sparse; and newer features increased its complexity but didn’t do us any favor. The abstractions were great until they stopped working, then you’re on your own, digging through all the layers.</p><p>If we were to build a “modern” and “professional” static site builder, what would we need? What would you expect? I know many people would say React, but do we really need a library that’s almost a new language, alongside its own runtime to write HTML? Let’s simplify, stay focused, and on track. <em>What do we actually need?</em></p><ul><li>A development server that automatically compiles the website and refreshes the browser on change.</li><li>An error overlay on the browser to show what’s failing and where.</li><li>Support for all kinds of assets.</li><li>A way to generate responsive images from a source image.</li><li>A templating engine.</li><li>A mechanism to add metadata to the pages of our website so that we can change the browser’s page title, or group pages together.</li><li>A straightforward way to extend it.</li></ul><h2>Why Elixir</h2><p>Why Elixir, you ask? Because we love Elixir. That’s it. There’s no other reason. We can also say that if there was a Elixir static site builder, we might not have built this one.</p><p>Elixir works well with other languages. One of my favorite packages to use is <a href="https://github.com/revelrylabs/elixir-nodejs" title="">elixir-nodejs</a>, which allows me to use NPM packages. Behind the scenes, it uses <a href="https://hexdocs.pm/elixir/Port.html" title="">Port</a> to talk with a pool of NodeJS processes. <a href="https://github.com/route/mogrify" title="">Mogrify</a> is also a nice wrapper for ImageMagick’s command line. You can also interact with C through NIFs to use something like <a href="https://github.com/scottdavis/sass.ex" title="">SASS</a>. Maybe you want to write your NIFs in Rust? <a href="https://github.com/rusterlium/rustler" title="">Rustler</a> has you covered. You can do these things in other languages, but when you bring OTP into the mix, your Elixir app becomes an operating system, managing other processes. That’s hard to beat.</p><p>We built <a href="https://stillstatic.io/" title="">Still</a>. You can write your templates in HTML, Slime, Markdown, or any other templating language you chose to add. You can embed Elixir everywhere: in your HTML, CSS, JS, Markdown, etc. You can just drop a module in the <em>lib</em> and call it from anywhere. Yeah, that simple. We built a processing pipeline that handles different types of content, and it’s easy to extend: just an Elixir module with one function. Do you <a href="https://stillstatic.io/" title="">still</a> want to use packages from NPM on the browser? There’s an <a href="https://github.com/still-ex/still_snowpack" title="">integration with Snowpack</a>. Do you want to see some websites built with still?</p><ul><li><p><a href="http://gabrielpoca.com/">http://gabrielpoca.com/</a> and its <a href="https://github.com/gabrielpoca/gabrielpoca.com/tree/master/priv/site">source code</a>.</p></li><li><p><a href="http://stillstatic.io/">http://stillstatic.io/</a> and its <a href="https://github.com/still-ex/still/tree/master/priv/site">source code</a>.</p></li><li><p><a href="https://alchemyconf.com/">https://alchemyconf.com/</a> and its <a href="https://github.com/subvisual/alchemyconf.com/tree/master/priv/site">source code</a>.</p></li></ul><p>Still doesn’t handle SCSS out of the box, but do you want it? Add the dependency:</p><pre><code class="elixir">defp deps do
  [
    {:sass, git: &quot;https://github.com/scottdavis/sass.ex&quot;, submodules: true},
    {:still, git: &quot;https://github.com/still-ex/still&quot;}
  ]
end</code></pre><p>Add a preprocessor:</p><pre><code class="elixir">defmodule YourSite.SassPreprocessor do
  use Still.Preprocessor

  @impl true
  def render(%{content: content} = file) do
    {:ok, content} = Sass.compile(content)
    %{file | extension: &quot;.css&quot;, content: content}
  end
end</code></pre><p>And you’re done. You can write SASS now. Do you also want to make some API requests during build time? Maybe fetch the number of stars from Github’s API?</p><pre><code class="elixir">defmodule YourSite.Github do
  def stars do
    {:ok, {_, _, body}} =
      :httpc.request(
        :get,
        {&quot;https://api.github.com/repos/still-ex/still&quot;,
         [{&#39;Accept&#39;, &#39;application/vnd.github.v3+json&#39;}]},
        [],
        []
      )

    body
    |&gt; Jason.decode!()
    |&gt; Map.get(&quot;stargazers_count&quot;)
  end
end</code></pre><p>Done, now just call this function from literally anywhere on your website:</p><pre><code>= link @env, to: &quot;https://github.com/still-ex/still&quot;, class: &quot;quote&quot; do
  .small -- #{YourSite.stars} stargazers on GitHub</code></pre><p>Everything you need to get started is in there! If I caught your attention, you can find more information on the <a href="https://stillstatic.io/" title="">website</a>, the <a href="https://hexdocs.pm/still/getting_started.html" title="">docs</a> and on <a href="https://github.com/still-ex/still" title="">Github</a>. If you have questions, open an issue, or send me a message on <a href="https://twitter.com/gabrielgpoca" title="">Twitter</a>.</p><h2>So much left to do</h2><p><strong>Still</strong> is just starting, but you can already do a lot with it. We are focused on making it extendable while ensuring that it includes everything necessary to build great websites out of the box. If you want to be an open-source contributor, <a href="https://github.com/still-ex/still" title="">Still is also a great way to start</a>.</p><p><strong>If you liked our poster, in the beginning, we have a few more on our <a href="https://stillstatic.io/" title="">website</a>.</strong></p><p><em>You should probably get a ticket for Alchemy Conf. All proceeds are for charity, and you get to see some of the best speakers around.</em></p></div></div><span class="h-card hidden p-author"><a class="p-name u-url" href="/" rel="author me">Gabriel Poça</a><a class="u-photo" href="/icon.png"></a><span class="p-note">Professional software engineer / amateur music maker / avid reader in the process of learning everything I can.</span></span><div class="hidden"><a class="u-url" href="/2021-04-27-announcing-still/index.html">Still building static websites in Elixir</a><time class="dt-published" datetime="2021-04-27T00:00:00-00:00">2021-04-27</time></div></article><footer class="py-20 items-end text-xs sm:text-sm bg-black"><div class="bg-my-purple mx-auto px-4 py-10 md:p-8 md:rounded md:container"><div class="flex flex-col sm:flex-row sm:flex-start"><div class="border-2 border-my-purple-darker rounded-full w-24 h-24 overflow-hidden flex-shrink-0 mb-4 sm:mx-auto sm:mb-0"><img src="/_includes/eu-41840077-400w.jpg" srcset="/_includes/eu-41840077-100w.jpg 100w, /_includes/eu-41840077-200w.jpg 200w, /_includes/eu-41840077-300w.jpg 300w, /_includes/eu-41840077-400w.jpg 400w" class="w-full h-full"/></div><div class="flex-grow sm:ml-8"><p class="font-bold mb-1">Hey! <br /> Thanks for stopping by.</p><p class="flex-grow">And feel free to reach out to me on <a href="https://twitter.com/gabrielgpoca" rel="noopener noreferrer" target="_blank" class="underline underline-current-color text-hover-none">Twitter</a> or <a class="underline underline-current-color text-hover-none" href="mailto:mail@gabrielpoca.com">e-mail</a>.<br />I'm always available to listen, talk, share, or brainstorm.</p><p class="flex-grow">For more information see the <a href="/about" class="underline underline-current-color text-hover-none">about page</a>.</p><p class="flex-grow">You can subscribe to this blog using <a href="/rss.xml" class="underline underline-current-color text-hover-none">RSS</a>.</p></div></div></div></footer><span class="h-card hidden p-author"><a class="p-name u-url" href="/" rel="author me">Gabriel Poça</a><a class="u-photo" href="/icon.png"></a><span class="p-note">Professional software engineer / amateur music maker / avid reader in the process of learning everything I can.</span></span><script data-goatcounter="https://gabrielpoca.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link href="https://github.com/gabrielpoca" rel="me" /><link rel="webmention" href="https://webmention.io/gabrielpoca.com/webmention" /><link rel="pingback" href="https://webmention.io/gabrielpoca.com/xmlrpc" /></body></html>